import{r as t,u as x,a as N,U as C,b as a,j as n,d as D,c as b,o as I,i as L}from"./index-d73aedfc.js";import{a as E}from"./axios-707ed124.js";import{h as P,s as U}from"./hide-3dc6c778.js";import{l as j}from"./loading-loop-4f5d220b.js";function W(){const[d,r]=t.useState(null),[f,i]=t.useState(!1),[l,w]=t.useState({email:"",password:""}),[u,v]=t.useState(!1);function p(e){r(null),w(o=>({...o,[e.target.name]:e.target.value}))}const m=x(),h=N(),{userDispatch:y}=t.useContext(C);async function S(e){var o,g;e.preventDefault(),i(!0),r("");try{const s=await E.post(`${b}/login`,l);localStorage.setItem("accessToken",s.data);const c=I(s.data);y({type:L,payload:c==null?void 0:c.resData}),i(!1),(o=h.state)!=null&&o.from?m(h.state.from):m("/")}catch(s){i(!1),r((g=s==null?void 0:s.response)==null?void 0:g.data)}}return t.useEffect(()=>{document.title="Jayantique | login"},[]),a("div",{className:"login auth",children:n("div",{className:"loginWrapper authWrapper",children:[a("span",{className:"authHeader",children:"Test"}),n("form",{onSubmit:S,children:[a("input",{className:"input",type:"email",name:"email",value:l.email,placeholder:"Email*",onChange:p,required:!0}),n("div",{className:"password",children:[a("input",{className:"passwordInput",type:u?"text":"password",name:"password",value:l.password,placeholder:"password*",onChange:p,required:!0}),a("img",{src:u?P:U,alt:"eye",onClick:()=>{v(e=>!e)}})]}),a("button",{children:f?a("img",{src:j,alt:"loading loop"}):"Sign in"})]}),d&&a("span",{style:{color:"red"},children:d}),n("span",{children:["Don't have an Account? ",a(D,{to:"/register",children:"Register"})]})]})})}export{W as default};
