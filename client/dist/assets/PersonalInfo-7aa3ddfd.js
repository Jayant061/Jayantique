import{r as i,_ as f,U as I,j as l,b as a,c as k,o as b,i as N}from"./index-d73aedfc.js";import{a as S}from"./axios-707ed124.js";i.lazy(()=>f(()=>import("./Address-b76c7989.js"),["assets/Address-b76c7989.js","assets/index-d73aedfc.js","assets/index-af484219.css","assets/add-31624fdf.js","assets/axios-707ed124.js"]));function E(){const{currentUser:e,userDispatch:u}=i.useContext(I),[o,p]=i.useState({token:localStorage.getItem("accessToken"),id:e==null?void 0:e._id,name:e==null?void 0:e.name,gender:e==null?void 0:e.gender,email:e==null?void 0:e.email,phone:e==null?void 0:e.phone}),[n,r]=i.useState(!0),[g,y]=i.useState("");function d(c){p(h=>({...h,[c.target.name]:c.target.value}))}async function v(c){var h;c.preventDefault();try{const t=await S.post(`${k}/auth/updateUser`,o);localStorage.setItem("accessToken",t.data);const m=b(t.data);m&&u({type:N,payload:m==null?void 0:m.resData})}catch(t){y((h=t==null?void 0:t.redponse)==null?void 0:h.data)}}const s=i.useRef();function C(){r(!0),p(()=>({token:localStorage.getItem("accessToken"),id:e==null?void 0:e._id,name:e==null?void 0:e.name,gender:e==null?void 0:e.gender,email:e==null?void 0:e.email,phone:e==null?void 0:e.phone})),s==null||s.current.scrollIntoView({behavior:"smooth"})}return i.useEffect(()=>{p(()=>({token:localStorage.getItem("accessToken"),id:e==null?void 0:e._id,name:e==null?void 0:e.name,gender:e==null?void 0:e.gender,email:e==null?void 0:e.email,phone:e==null?void 0:e.phone}))},[e]),l("div",{className:"accountSettings",ref:s,children:[a("h2",{children:"Personal Information"}),l("div",{className:"personalInfo",children:[l("div",{className:"username personalInfoChild",children:[a("span",{children:"Name :"}),a("input",{type:"text",name:"name",value:o==null?void 0:o.name,readOnly:n,onChange:d,style:n?{cursor:"no-drop"}:{}})]}),l("div",{className:"gender personalInfoChild",children:[a("span",{children:"Gender : "}),l("div",{id:"registrationPartition",className:"inputsPartition",style:n?{cursor:"no-drop"}:{},children:[l("div",{className:"radioInput",children:[a("input",{type:"radio",id:"male",name:"gender",value:"Male",checked:o.gender==="Male",onChange:n?()=>{}:d,required:!0,style:n?{cursor:"no-drop"}:{}}),a("label",{htmlFor:"male",style:n?{cursor:"no-drop"}:{},children:"Male"})]}),l("div",{className:"radioInput",children:[a("input",{type:"radio",id:"female",name:"gender",value:"Female",checked:o.gender==="Female",onChange:n?()=>{}:d,required:!0,style:n?{cursor:"no-drop"}:{}}),a("label",{htmlFor:"female",style:n?{cursor:"no-drop"}:{},children:"Female"})]})]})]}),l("div",{className:"email personalInfoChild",children:[a("span",{children:"Email :"}),a("input",{type:"email",name:"email",id:"",value:o==null?void 0:o.email,readOnly:n,onChange:d,style:n?{cursor:"no-drop"}:{}})]}),l("div",{className:"phone personalInfoChild",children:[a("span",{children:"Phone :"}),a("input",{type:"number",name:"phone",value:o==null?void 0:o.phone,readOnly:n,onChange:d,style:n?{cursor:"no-drop"}:{}})]}),l("div",{className:"buttons",children:[!n&&a("button",{onClick:v,children:"Save Changes"}),n?a("button",{onClick:()=>{r(!1)},children:"Edit"}):a("button",{onClick:C,children:"Cancel"})]}),g&&a("span",{style:{color:"red",textAlign:"center"},children:g})]})]})}export{E as default};
